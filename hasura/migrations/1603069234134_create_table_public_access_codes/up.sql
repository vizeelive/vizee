CREATE EXTENSION IF NOT EXISTS pgcrypto;
CREATE TABLE "public"."access_codes"("id" uuid NOT NULL DEFAULT gen_random_uuid(), "event_id" uuid NOT NULL, "user_id" text NOT NULL, "created" timestamptz NOT NULL DEFAULT now(), "created_by" text NOT NULL, "transaction_id" uuid NOT NULL, "price" money NOT NULL, PRIMARY KEY ("id") , FOREIGN KEY ("event_id") REFERENCES "public"."events"("id") ON UPDATE restrict ON DELETE restrict, FOREIGN KEY ("user_id") REFERENCES "public"."users"("id") ON UPDATE restrict ON DELETE restrict, FOREIGN KEY ("created_by") REFERENCES "public"."users"("id") ON UPDATE restrict ON DELETE restrict, FOREIGN KEY ("transaction_id") REFERENCES "public"."transactions"("id") ON UPDATE restrict ON DELETE restrict, UNIQUE ("id"));
